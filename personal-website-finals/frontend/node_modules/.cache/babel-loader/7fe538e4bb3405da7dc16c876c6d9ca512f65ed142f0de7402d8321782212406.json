{"ast":null,"code":"import _objectSpread from\"/workspaces/personal-website-finals/personal-website-finals/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect,useCallback}from'react';import{travelLogApi}from'../services/api';import toast from'react-hot-toast';export const useTravelLog=()=>{const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const fetchLogs=useCallback(async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:page;try{const response=await travelLogApi.getAll(pageNum,10);if(pageNum===1){setLogs(response.data);}else{setLogs(prev=>[...prev,...response.data]);}setHasMore(response.data.length===10);}catch(error){toast.error('Failed to fetch travel logs');}},[page]);const createLog=useCallback(async data=>{try{const response=await travelLogApi.create(data);setLogs(prev=>[response.data,...prev]);toast.success('Travel log recorded! ✨');return true;}catch(error){toast.error(error.message||'Failed to create log');return false;}},[]);const likeLog=useCallback(async id=>{try{const response=await travelLogApi.like(id);setLogs(prev=>prev.map(log=>log.id===id?_objectSpread(_objectSpread({},log),{},{likes:response.data.likes}):log));toast.success('Thanks for the like! ❤️');}catch(error){toast.error('Failed to like log');}},[]);const loadMore=useCallback(()=>{if(hasMore){setPage(prev=>prev+1);}},[hasMore]);useEffect(()=>{fetchLogs(1);},[fetchLogs]);useEffect(()=>{if(page>1){fetchLogs(page);}},[page,fetchLogs]);return{logs,loading,hasMore,createLog,likeLog,loadMore};};","map":{"version":3,"names":["useState","useEffect","useCallback","travelLogApi","toast","useTravelLog","logs","setLogs","loading","setLoading","page","setPage","hasMore","setHasMore","fetchLogs","pageNum","arguments","length","undefined","response","getAll","data","prev","error","createLog","create","success","message","likeLog","id","like","map","log","_objectSpread","likes","loadMore"],"sources":["/workspaces/personal-website-finals/personal-website-finals/frontend/src/hooks/useTravelLog.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { travelLogApi } from '../services/api';\nimport { TravelLog, CreateLogDto } from '../types';\nimport toast from 'react-hot-toast';\n\nexport const useTravelLog = () => {\n  const [logs, setLogs] = useState<TravelLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  const fetchLogs = useCallback(async (pageNum = page) => {\n    try {\n      const response = await travelLogApi.getAll(pageNum, 10);\n      if (pageNum === 1) {\n        setLogs(response.data);\n      } else {\n        setLogs(prev => [...prev, ...response.data]);\n      }\n      setHasMore(response.data.length === 10);\n    } catch (error) {\n      toast.error('Failed to fetch travel logs');\n    }\n  }, [page]);\n\n  const createLog = useCallback(async (data: CreateLogDto) => {\n    try {\n      const response = await travelLogApi.create(data);\n      setLogs(prev => [response.data, ...prev]);\n      toast.success('Travel log recorded! ✨');\n      return true;\n    } catch (error: any) {\n      toast.error(error.message || 'Failed to create log');\n      return false;\n    }\n  }, []);\n\n  const likeLog = useCallback(async (id: string) => {\n    try {\n      const response = await travelLogApi.like(id);\n      setLogs(prev =>\n        prev.map(log =>\n          log.id === id ? { ...log, likes: response.data.likes } : log\n        )\n      );\n      toast.success('Thanks for the like! ❤️');\n    } catch (error) {\n      toast.error('Failed to like log');\n    }\n  }, []);\n\n  const loadMore = useCallback(() => {\n    if (hasMore) {\n      setPage(prev => prev + 1);\n    }\n  }, [hasMore]);\n\n  useEffect(() => {\n    fetchLogs(1);\n  }, [fetchLogs]);\n\n  useEffect(() => {\n    if (page > 1) {\n      fetchLogs(page);\n    }\n  }, [page, fetchLogs]);\n\n  return {\n    logs,\n    loading,\n    hasMore,\n    createLog,\n    likeLog,\n    loadMore,\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}